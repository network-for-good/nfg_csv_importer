- count_of_import_types = ImportDefinition.import_types.size
- import_type_column_structure_classes = "display-flex"

- if count_of_import_types == 0
  - import_type_column_structure_classes << " col-md-6 col-xl-1"
- elsif count_of_import_types > 4
  - import_type_column_structure_classes << " col-md-6 col-xl-3"
- else
  - grid_size_by_dividing_count_of_imports_by_12 = ((12).fdiv(count_of_import_types)).round
  - import_type_column_structure_classes << " col-md-6 col-xl-#{grid_size_by_dividing_count_of_imports_by_12}"

.nfg-csv-importer
  .container-fluid.container-flush.bg-white
    .jumbotron.jumbotron-fluid.jumbotron-clouds
      .container-fluid
        %h1.text-xs-center
          Starting a
          %strong
            new
          data import?
        .p-b-1.text-xs-center
          %p This self-guided importing tool is here to give you the flxibility to import your own data whenever you need to.

        #import_type_row.row{ data: { show_hide: "hide" } }

          - ImportDefinition.import_types.each do |import_type|
            - definition = ImportDefinition.get_definition(import_type, @imported_for)

            %div{ class: import_type_column_structure_classes, id: import_type }
              .card.flex-1
                .card-block
                  %h4.card-title.m-b-1
                    Import
                    = import_type.to_s.pluralize.titleize
                  .card-text.m-b-1
                    = simple_format(definition.headline)

                  = link_to NfgCsvImporter::Engine.routes.url_helpers.new_import_path(import_type: import_type.to_s), class: "btn btn-white-bg blue", id: "begin_import_#{ import_type }" do
                    = fa_icon "chevron-right", text: "Begin Import", right: true


        .text-xs-center.m-t-1
          %a.btn.btn-primary{ data: { show_hide_target: "#import_type_row", fade_out: "true" } }
            = fa_icon "chevron-right", text: "Get Started", right: true

    = render(partial: 'shared/flash_messages') rescue nil

    #imports_listing.row.p-x-1
      .col-xs-12
        .row
          .col-xs-12
            %h2
              Past Uploads & Imports
        .row
          - if @imports.empty?
            .col-xs-12
              There are no Imports
          -else
            .col-xs-12
              .row.row-listing-header.m-b-1
                - imports_listing_row_column_structure_class = "col-md-2"

                %div{ class: imports_listing_row_column_structure_class }
                  %small Uploaded by
                %div{ class: imports_listing_row_column_structure_class }
                  %small Record Count
                %div{ class: imports_listing_row_column_structure_class }
                  %small Records With Errors
                %div{ class: imports_listing_row_column_structure_class }
                  %small Last Updated
                %div{ class: imports_listing_row_column_structure_class }
                  %small Import Status
                %div{ class: imports_listing_row_column_structure_class }
              = render partial: "import", collection: @imports, locals: { imports_listing_row_column_structure_class: imports_listing_row_column_structure_class }
              .row.p-y-base-1
                .col-xs-12
                  - if defined?(WillPaginate)
                    = will_paginate @imports
                  - elsif defined?(Kaminari)
                    = paginate @imports
